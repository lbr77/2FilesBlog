!function(){var e,t,n,r,a=["https://ss.im5i.com/2021/09/06/fRspW.png"];function o(e){return e.split("?")[0].replace(/[^/]+$/,"")}self.document?function(){var e=document.documentElement;function t(t){e.innerHTML=t}function n(){location.reload()}var r,c=document.currentScript,i=c.src;if(i){var s=navigator.serviceWorker;if(!s)return void t("Error: Service Worker is not supported");var u=s.register(i).catch((function(e){t(e.message)}));r=o(i)}else r=c.dataset.root;function h(e){e?crypto.subtle.digest("SHA-256",e).then((function(t){var a=new Uint8Array(t);if(""===btoa(String.fromCharCode.apply(null,a))){var o,c,i,s=(o=new Uint32Array(e),c=new Uint8Array(3*o.length),i=0,o.forEach((function(e){c[i++]=e,c[i++]=e>>8,c[i++]=e>>16})),c);caches.delete(".web2img").then((function(){caches.open(".web2img").then((function(e){(function(e,t){var n=e.indexOf(13),a=e.subarray(0,n),o=(new TextDecoder).decode(a),c=JSON.parse(o),i=n+1,s=[];for(var u in c){var h=c[u];h["cache-control"]="max-age=60";var f=h["content-length"],d=e.subarray(i,i+f),l=new Request(r+u),p=new Response(d,{headers:h});s.push(t.put(l,p)),i+=f}return Promise.all(s)})(s,e).then((function(){u?u.then(n):n()}))}))}))}else p()})):p()}var f=function(e){var t=new Image;t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0);var r=n.getImageData(0,0,t.width,t.height).data.buffer;parent.postMessage(r,"*",[r])},t.onerror=function(){parent.postMessage("","*")},t.crossOrigin=1,t.src=e.data},d=document.createElement("iframe");d.src="data:text/html,<script>onmessage="+f+"<\/script>",d.style.display="none",d.onload=p,e.appendChild(d);var l=d.contentWindow;function p(){var e=a.shift();e&&l.postMessage(e,"*")}self.onmessage=function(e){e.source===l&&h(e.data)}}():(n=location.href,r=o(n),setInterval((function(){("cache"in Request.prototype?fetch(n,{cache:"no-cache"}):fetch(n+"?t="+Date.now())).then((function(n){n.text().then((function(n){t!==n&&(t&&(e=1,console.log("update")),t=n)}))}))}),12e4),onfetch=function(n){var a=n.request;if(!a.url.indexOf(r)){var o;if(e&&"navigate"===a.mode)o=new Response('<script data-root="'+r+'">'+t+"<\/script>",{headers:{"content-type":"text/html"}}),e=0;else{var c=new URL(a.url).pathname.replace(/\/{2,}/g,"/").replace(/\/$/,"/index.html");o=caches.open(".web2img").then((function(e){return e.match(c).then((function(t){return t||e.match(r+"404.html").then((function(e){return e||new Response("file not found: "+c,{status:404})}))}))}))}n.respondWith(o)}})}();
